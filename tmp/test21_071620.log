F
======================================================================
FAIL: test_21_linter_functionality (test_gds.GDSTest.test_21_linter_functionality)
测试Linter语法检查功能
----------------------------------------------------------------------
Traceback (most recent call last):
  File "/Users/wukunhuan/.local/bin/_UNITTEST/test_gds.py", line 312, in _run_gds_command
    self.assertEqual(result.returncode, 0, f"命令执行失败: {command}")
AssertionError: 1 != 0 : 命令执行失败: linter valid_script.py

During handling of the above exception, another exception occurred:

Traceback (most recent call last):
  File "/Users/wukunhuan/.local/bin/_UNITTEST/test_gds.py", line 1831, in test_21_linter_functionality
    result = self._run_gds_command('linter valid_script.py')
             ^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^^
  File "/Users/wukunhuan/.local/bin/_UNITTEST/test_gds.py", line 318, in _run_gds_command
    self.fail(f"命令执行异常: {command} - {e}")
AssertionError: 命令执行异常: linter valid_script.py - 1 != 0 : 命令执行失败: linter valid_script.py

----------------------------------------------------------------------
Ran 1 test in 362.928s

FAILED (failures=1)
🚀 设置GDS全面测试环境...
📁 远端测试目录: ~/tmp/gds_test_20250831_071620_236024_cde66182
✅ 已切换到远端测试目录: ~/tmp/gds_test_20250831_071620_236024_cde66182
📁 本地临时目录: /var/folders/w0/m02j_xv925sg34708rb2xgzr0000gn/T/gds_test_local_vap_y8gm
✅ 测试环境设置完成

🧪 测试21: Linter功能测试
📤 上传测试文件...

🔄 执行带重试的命令: upload --force /Users/wukunhuan/.local/bin/_UNITTEST/_DATA/valid_script.py
🔍 验证命令: ['ls valid_script.py']
🎯 最大重试次数: 3

📍 尝试 1/3

🔧 执行命令: upload --force /Users/wukunhuan/.local/bin/_UNITTEST/_DATA/valid_script.py
📤 返回码: 0
📝 输出: ⏳ Waiting for upload .........√
⏳ Waiting for result .........√
⏳ Validating valid_script.py ...√
Upload completed: 1/1 files
...
  🔍 验证 1/1: ls valid_script.py

🔧 执行命令: ls valid_script.py
📤 返回码: 1
📝 输出: Failed to list files: Path not found: valid_script.py
...
  ❌ 验证失败，返回码: 1
⏳ 验证失败，等待2秒后重试...

📍 尝试 2/3

🔧 执行命令: upload --force /Users/wukunhuan/.local/bin/_UNITTEST/_DATA/valid_script.py
📤 返回码: 0
📝 输出: ⏳ Waiting for upload .........√
⏳ Waiting for result .......√
⏳ Validating valid_script.py ...√
Upload completed: 1/1 files
...
  🔍 验证 1/1: ls valid_script.py

🔧 执行命令: ls valid_script.py
📤 返回码: 0
📝 输出: valid_script.py
...
  ✅ 验证成功
🎉 所有验证通过，命令成功执行

🔄 执行带重试的命令: upload --force /Users/wukunhuan/.local/bin/_UNITTEST/_DATA/invalid_script.py
🔍 验证命令: ['ls invalid_script.py']
🎯 最大重试次数: 3

📍 尝试 1/3

🔧 执行命令: upload --force /Users/wukunhuan/.local/bin/_UNITTEST/_DATA/invalid_script.py
📤 返回码: 0
📝 输出: ⏳ Waiting for upload .........√
⏳ Waiting for result .........√
⏳ Validating invalid_script.py ...√
Upload completed: 1/1 files
...
  🔍 验证 1/1: ls invalid_script.py

🔧 执行命令: ls invalid_script.py
📤 返回码: 0
📝 输出: invalid_script.py
...
  ✅ 验证成功
🎉 所有验证通过，命令成功执行

🔄 执行带重试的命令: upload --force /Users/wukunhuan/.local/bin/_UNITTEST/_DATA/valid_config.json
🔍 验证命令: ['ls valid_config.json']
🎯 最大重试次数: 3

📍 尝试 1/3

🔧 执行命令: upload --force /Users/wukunhuan/.local/bin/_UNITTEST/_DATA/valid_config.json
📤 返回码: 0
📝 输出: ⏳ Waiting for upload ........√
⏳ Waiting for result ...√
⏳ Validating valid_config.json ...√
Upload completed: 1/1 files
...
  🔍 验证 1/1: ls valid_config.json

🔧 执行命令: ls valid_config.json
📤 返回码: 0
📝 输出: valid_config.json
...
  ✅ 验证成功
🎉 所有验证通过，命令成功执行
✅ 测试语法正确的Python文件

🔧 执行命令: linter valid_script.py
📤 返回码: 1
📝 输出: ❌ Error executing shell command: 'FileOperations' object has no attribute 'cmd_linter'
...
💥 命令执行异常: 1 != 0 : 命令执行失败: linter valid_script.py
